<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Merging objects with vanilla JavaScript | Go Make Things</title>
		

		
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		
		<link rel="shortcut icon" href="https://gomakethings.com/img/favicon.ico">
		<link rel="icon" sizes="16x16 32x32" href="https://gomakethings.com/img/favicon.ico">

		
		
		<link rel="alternate" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">
		<link rel="feed" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">

		
		<link rel="stylesheet" href="https://gomakethings.com/css/main.min.1.1.0.css">

		
		<script src="https://gomakethings.com/js/detects.min.1.1.0.js"></script>
		<script>
			;(function () {
				var css = 'https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i';
				if (getCookie('fontsLoaded')) {
					loadCSS(css);
					document.documentElement.className += 'fonts-loaded';
				} else {
					loadCSS(css);
					var font = new FontFaceObserver('PT Serif');
					font.load().then(function () {
						var expires = new Date(+new Date() + (7 * 24 * 60 * 60 * 1000)).toUTCString();
						document.cookie = 'fontsLoaded=true; expires=' + expires;
						document.documentElement.className += ' fonts-loaded';
					});
				}
			})();
		</script>
	</head>

	<body>

		<div class="container container-large">

	
	<a class="screen-reader screen-reader-focusable" href="#main">Skip to main content</a>

	
	<a class="screen-reader screen-reader-focusable" href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;?subject=Go%20Make%20Things:%20Accessibility%20Feedback">Accessibility Feedback</a>

</div>

		<header class="container container-large margin-bottom-large">
	<nav class="nav-wrap">
		<a class="logo" href="https://gomakethings.com">
			<svg xmlns="http://www.w3.org/2000/svg" style="height:.8em;width:.8em" viewBox="0 0 16 16"><title></title><path fill="currentColor" d="M14 9v2.066c-1.258 1.285-3.016 2.526-5 2.852V8.001h3v-1L9 5.83A3.001 3.001 0 0 0 8 .001 3 3 0 0 0 7 5.83L4 7.001v1h3v5.917c-1.984-.326-3.742-1.567-5-2.852V9H0v1c0 2 4 6 8 6s8-4 8-6V9h-2zM9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
			Go Make Things
		</a>
		<div class="nav-menu" id="nav-menu">
			<ul class="nav">
				<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
			</ul>
		</div>
	</nav>
</header>

		<main id="main" tabindex="-1">

			<div class="container">

	<article>

	
	<h1><span class="title">Merging objects with vanilla JavaScript</span></h1>
	

	

<p>Vanilla JavaScript doesn&rsquo;t offer any native method to merge objects together.</p>

<p>(<em>Technically, you could use <code>Object.assign()</code>, but it has some limitations and doesn&rsquo;t support deep merging.</em>)</p>

<p>Today, I&rsquo;m going to show you how to write a simple helper function for merging objects with vanilla JS.</p>

<h2 id="the-basic-approach">The Basic Approach</h2>

<p>To make this work, we want to create an empty object, and push the keys and properties of each of the objects we want to merge into it.</p>

<pre><code class="language-lang-javascript">var obj = {
	sandwich: 'chicken',
	condiment: 'mayo',
	desert: true
};

// Create a new object
var extended = {};

// Loop through our object
for (var prop in obj) {
	if (obj.hasOwnProperty(prop)) {
		// Push each value from `obj` into `extended`
		extended[prop] = obj[prop];
	}
}
</code></pre>

<p>In the code above, we&rsquo;re looping through <code>obj</code> and adding each key/value pair into <code>extended</code>. The <code>extended</code> object is now identical to <code>obj1</code>.</p>

<p>We can do this with multiple objects to merge them together.</p>

<pre><code class="language-lang-javascript">var obj1 = {
	sandwich: 'chicken',
	condiment: 'mayo',
	desert: true
};

var obj2 = {
	sandwich: 'tuna',
	chips: 'Cape Cod',
	desert: false
}

// Create a new object
var extended = {};

// Loop through obj1
for (var prop1 in obj1) {
	if (obj1.hasOwnProperty(prop1)) {
		// Push each value from `obj1` into `extended`
		extended[prop1] = obj1[prop1];
	}
}

// Loop through obj2
for (var prop2 in obj2) {
	if (obj2.hasOwnProperty(prop2)) {
		// Push each value from `obj2` into `extended`
		extended[prop2] = obj2[prop2];
	}
}
</code></pre>

<p>The <code>extended</code> object is now a merge of our two objects.</p>

<pre><code class="language-lang-javascript">{
	sandwich: 'tuna',
	condiment: 'mayo',
	chips: 'Cape Cod',
	desert: false
}
</code></pre>

<h2 id="creating-a-helper-method">Creating a helper method</h2>

<p>There&rsquo;s a lot of duplicated code in the example above. Instead of manually looping through each object, let&rsquo;s create a function to handle that for us.</p>

<pre><code class="language-lang-javascript">var obj1 = {
	sandwich: 'chicken',
	condiment: 'mayo',
	desert: true
};

var obj2 = {
	sandwich: 'tuna',
	chips: 'Cape Cod',
	desert: false
}

// Create a new object
var extended = {};

var merge = function (obj) {
	if (obj.hasOwnProperty(prop)) {
		// Push each value from `obj` into `extended`
		extended[prop] = obj[prop];
	}
};

merge(obj1);
merge(obj2);
</code></pre>

<p>This is definitely better, but imagine you&rsquo;re merging more than two objects. we don&rsquo;t want to have to call our <code>merge()</code> method on each one.</p>

<p>Let&rsquo;s create an <code>extend()</code> function to automate the whole thing for us.</p>

<pre><code class="language-lang-javascript">var extend = function () {

	// Create a new object
	var extended = {};

	// Merge the object into the extended object
	var merge = function (obj) {
		if (obj.hasOwnProperty(prop)) {
			// Push each value from `obj` into `extended`
			extended[prop] = obj[prop];
		}
	};

	// Loop through each object and conduct a merge
	for (var i = 0; i &lt; arguments.length; i++) {
		merge(arguments[i]);
	}

	return extended;

};

var newObj = extend(obj1, obj2);
</code></pre>

<p>If you don&rsquo;t specify assign variables to arguments on a function (ie. <code>function (var1, var2) {...}</code>), you can use the <code>arguments</code> variable to access an array of arguments that were passed into your method.</p>

<p>In the method above, <code>arguments</code> is each of the objects passed into our <code>extend()</code> method.</p>

<p>We loop through the <code>arguments</code> array and call the <code>merge()</code> method on each one. Then, we return our <code>extended</code> object.</p>

<p>You can pass in as many objects as you want. The method will automatically merge them all.</p>

<h2 id="deep-merging">Deep Merging</h2>

<p>Our helper method currently does a shallow merge. Imagine you had two objects with a nested structure.</p>

<pre><code class="language-lang-javascript">var obj1 = {
	sandwich: 'chicken',
	condiment: 'mayo',
	desert: true,
	days: {
		monday: true,
		wednesday: true,
		friday: true
	}
};

var obj2 = {
	sandwich: 'tuna',
	chips: 'Cape Cod',
	desert: false,
	days: {
		monday: false,
		tuesday: true,
		thursday: true
	}
}
</code></pre>

<p>In a shallow merge, the <code>days</code> key in <code>obj2</code> would completely overwrite the value from <code>obj1</code>. In a deep merge, the <code>days</code> objects from <code>obj1</code> and <code>obj2</code> would get merged together.</p>

<pre><code class="language-lang-javascript">// Shallow merge
{
	monday: false,
	tuesday: true,
	thursday: true
}

// Deep merge
{
	monday: false,
	tuesday: true,
	wednesday: true,
	thursday: true,
	friday: true
}
</code></pre>

<p>Depending on what you&rsquo;re trying to do, a shallow merge might be the desired result. Other times, you might want a deep merge.</p>

<p>Let&rsquo;s add the option to do both.</p>

<h2 id="adding-a-deep-merge">Adding a deep merge</h2>

<p>In jQuery&rsquo;s <code>extend()</code> method, you can pass in the first argument as a boolean. If it&rsquo;s <code>true</code>, it will do a deep merge instead of a shallow one. Let&rsquo;s use that same approach.</p>

<p>First, we&rsquo;re going to set up a new variable, <code>deep</code>, to store whether or not a merge should be deep. We&rsquo;ll set it to <code>false</code> by default. We&rsquo;re also going to predefine <code>var i = 0</code> for our <code>for</code> loop.</p>

<pre><code class="language-lang-javascript">var extend = function () {

	// Variables
	var extended = {};
	var deep = false;
	var i = 0;

	// ...

};
</code></pre>

<p>Then, we&rsquo;re going to check to see if the merge is deep.</p>

<p>If it is, we&rsquo;ll set <code>deep</code> to <code>true</code>. We&rsquo;ll also advance our <code>i</code> variable by 1 so that our loop will start with the first object, and not the boolean indicating a deep merge.</p>

<pre><code class="language-lang-javascript">var extend = function () {

	// Variables
	var extended = {};
	var deep = false;
	var i = 0;

	// Check if a deep merge
	if (typeof (arguments[0]) === 'boolean]') {
		deep = arguments[0];
		i++;
	}

	// ...

};
</code></pre>

<p>If it is a deep merge, whenever we encounter a property that&rsquo;s an object, we&rsquo;ll recursively send it back through our <code>extend()</code> method.</p>

<pre><code class="language-lang-javascript">var extend = function () {

	// Variables
	var extended = {};
	var deep = false;
	var i = 0;

	// Check if a deep merge
	if (typeof (arguments[0]) === 'boolean]') {
		deep = arguments[0];
		i++;
	}

	// Merge the object into the extended object
	var merge = function (obj) {
		if (obj.hasOwnProperty(prop)) {
			if (deep &amp;&amp; Object.prototype.toString.call(obj[prop]) === '[object Object]') {
				// If we're doing a deep merge and the property is an object
				extended[prop] = extend(true, extended[prop], obj[prop]);
			} else {
				// Otherwise, do a regular merge
				extended[prop] = obj[prop];
			}
		}
	};

	// ...

};
</code></pre>

<p>Finally, we can remove the <code>var i = 0</code> from our <code>for</code> loop, since we&rsquo;ve already set it. Here&rsquo;s the completed function.</p>

<pre><code class="language-lang-javascript">var extend = function () {

	// Variables
	var extended = {};
	var deep = false;
	var i = 0;

	// Check if a deep merge
	if (typeof (arguments[0]) === 'boolean]') {
		deep = arguments[0];
		i++;
	}

	// Merge the object into the extended object
	var merge = function (obj) {
		if (obj.hasOwnProperty(prop)) {
			if (deep &amp;&amp; Object.prototype.toString.call(obj[prop]) === '[object Object]') {
				// If we're doing a deep merge and the property is an object
				extended[prop] = extend(true, extended[prop], obj[prop]);
			} else {
				// Otherwise, do a regular merge
				extended[prop] = obj[prop];
			}
		}
	};

	// Loop through each object and conduct a merge
	for (; i &lt; arguments.length; i++) {
		merge(arguments[i]);
	}

	return extended;

};
</code></pre>

<p>You would use it like this:</p>

<pre><code class="language-lang-javascript">var shallowMerge = extend(obj1, obj2);
var deepMerge = extend(true, obj1, obj2);
</code></pre>

<p>You can grab <a href="https://github.com/cferdinandi/extend">a copy of this function on GitHub</a>.</p>


</article>

	<br>
<aside>
	<p><mark>🚀 <em><strong>Make 2018 the year you master JavaScript!</strong> My <a href="https://gomakethings.com/guides/">pocket guides</a> and <a href="https://gomakethings.com/courses/">mini courses</a> are short, focused, and made for beginners. You can do this!</em></mark></p>

	<p><em>Have any questions or comments about this post? Email me at <a href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;">&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;</a> or contact me on Twitter at <a href="http://twitter.com/ChrisFerdinandi">@ChrisFerdinandi</a>.</em></p>

	<form action="https://gomakethings.us1.list-manage.com/subscribe/post?u=f2d244c0df42a0431bd08ddea&amp;id=aeaa9dd034" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
	<div class="row">
		<div class="grid-two-thirds">
			<div class="tarpit">
				<label for="name">Don't fill this field in</label>
				<input type="text" name="b_f2d244c0df42a0431bd08ddea_aeaa9dd034" id="name" value="">
			</div>
			<div>
				<label class="screen-reader" for="mce-EMAIL">Email Address</label>
				<input type="email" name="EMAIL" id="mce-EMAIL" title="The domain portion of the email address is invalid (the part after the @)." pattern="^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$" placeholder="Your email address..." required>
			</div>
			<input type="hidden" value="16" name="group[6981][16]" id="mce-group[6981]-6981-0">
		</div>
		<div class="grid-third">
			<button class="btn btn-block" type="submit">Get Daily Developer Tips</button>
		</div>
	</div>
	<div class="mc-status"></div>
</form>
</aside>

			</div>
		</main>

		<footer class="container container-large">
			<hr class="margin-bottom">
			<nav class="tabindex nav-secondary" id="nav-secondary" tabindex="-1">
	<ul class="list-inline list-inline-responsive">
		<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
	</ul>
</nav>
			<p class="text-small">Made with ❤️ in Massachussets. Unless otherwise noted, all code is free to use under the <a href="/mit">MIT License</a>.</p>
		</footer>

		<script src="https://gomakethings.com/js/loadJS.min.1.1.0.js"></script>
		<script>
			if ('querySelector' in document && 'addEventListener' in window) {
				loadJS('https:\/\/gomakethings.com\/js\/main.min.1.1.0.js');
			}
		</script>
	</body>
</html>