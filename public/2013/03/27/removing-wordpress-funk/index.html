<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Removing WordPress Funk | Go Make Things</title>
		

		
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		
		<link rel="shortcut icon" href="https://gomakethings.com/img/favicon.ico">
		<link rel="icon" sizes="16x16 32x32" href="https://gomakethings.com/img/favicon.ico">

		
		
		<link rel="alternate" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">
		<link rel="feed" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">

		
		<link rel="stylesheet" href="https://gomakethings.com/css/main.min.1.1.0.css">

		
		<script src="https://gomakethings.com/js/detects.min.1.1.0.js"></script>
		<script>
			;(function () {
				var css = 'https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i';
				if (getCookie('fontsLoaded')) {
					loadCSS(css);
					document.documentElement.className += 'fonts-loaded';
				} else {
					loadCSS(css);
					var font = new FontFaceObserver('PT Serif');
					font.load().then(function () {
						var expires = new Date(+new Date() + (7 * 24 * 60 * 60 * 1000)).toUTCString();
						document.cookie = 'fontsLoaded=true; expires=' + expires;
						document.documentElement.className += ' fonts-loaded';
					});
				}
			})();
		</script>
	</head>

	<body>

		<div class="container container-large">

	
	<a class="screen-reader screen-reader-focusable" href="#main">Skip to main content</a>

	
	<a class="screen-reader screen-reader-focusable" href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;?subject=Go%20Make%20Things:%20Accessibility%20Feedback">Accessibility Feedback</a>

</div>

		<header class="container container-large margin-bottom-large">
	<nav class="nav-wrap">
		<a class="logo" href="https://gomakethings.com">
			<svg xmlns="http://www.w3.org/2000/svg" style="height:.8em;width:.8em" viewBox="0 0 16 16"><title></title><path fill="currentColor" d="M14 9v2.066c-1.258 1.285-3.016 2.526-5 2.852V8.001h3v-1L9 5.83A3.001 3.001 0 0 0 8 .001 3 3 0 0 0 7 5.83L4 7.001v1h3v5.917c-1.984-.326-3.742-1.567-5-2.852V9H0v1c0 2 4 6 8 6s8-4 8-6V9h-2zM9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
			Go Make Things
		</a>
		<div class="nav-menu" id="nav-menu">
			<ul class="nav">
				<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
			</ul>
		</div>
	</nav>
</header>

		<main id="main" tabindex="-1">

			<div class="container">

	<article>

	
	<h1><span class="title">Removing WordPress Funk</span></h1>
	

	<p>In &ldquo;<a href="https://gomakethings.com/code-is-craft/">I Can Smell Your CMS</a>,&rdquo; Phil Hawksworth explains how well meaning CMS&rsquo;s can add all sorts of funk to the code we&rsquo;ve worked so hard to craft.</p>

<p>Today, I want to share a few simple things you can do to remove CMS funk from WordPress sites.</p>

<p><em>This post was updated on April 23, 2013 with additional funk-removing techniques.</em>

<h2>WordPress Funk</h2></p>

<p>I manage the <a href="http://www.pawsnewengland.com">PAWS New England website</a>, but volunteers manage the blog.</p>

<p>The WordPress visual editor makes it really easy for them to share news about the organization on the site. It also adds lots of inline styling that overrides default design choices, and empty paragraphs and spans that clutter up the HTML. These things don&rsquo;t just look ugly. They hurt site performance and impact Google search rankings.</p>

<p>It&rsquo;s not the volunteers&rsquo; fault. It&rsquo;s the CMS&rsquo;s.</p>

<h2>The Funk Fix</h2>

<p>Fortunately, there&rsquo;s a few simple things you can do to remove CMS funk from WordPress.</p>

<p>The following snippet of PHP will remove inline styling, <code class="language-markup">font</code> tags, and empty <code class="language-markup">p</code> and <code class="language-markup">span</code> elements from the CMS content. Add it to your <code>functions.php</code>.</p>

<pre><code class="language-php">/* ======================================================================
 * Disable-Inline-Styles.php
 * Removes inline styles and other coding junk added by the WYSIWYG editor.
 * Script by Chris Ferdinandi - https://gomakethings.com
 * ====================================================================== */

add_filter( 'the_content', 'clean_post_content' );
function clean_post_content($content) {

    // Remove inline styling
    $content = preg_replace('/(&lt;[^&gt;]+) style=".*?"/i', '$1', $content);

    // Remove font tag
    $content = preg_replace('/&lt;font[^&gt;]+&gt;/', '', $content);

    // Remove empty tags
    $post_cleaners = array('&lt;p&gt;&lt;/p&gt;' =&gt; '', '&lt;p&gt; &lt;/p&gt;' =&gt; '', '&lt;p&gt;&amp;nbsp;&lt;/p&gt;' =&gt; '', '&lt;span&gt;&lt;/span&gt;' =&gt; '', '&lt;span&gt; &lt;/span&gt;' =&gt; '', '&lt;span&gt;&amp;nbsp;&lt;/span&gt;' =&gt; '', '&lt;span&gt;' =&gt; '', '&lt;/span&gt;' =&gt; '', '&lt;font&gt;' =&gt; '', '&lt;/font&gt;' =&gt; '');
    $content = strtr($content, $post_cleaners);

    return $content;
}</code></pre>

<p>This script doesn&rsquo;t actually remove those elements from the content in the database. Instead, it filters them out as it renders the content into an HTML page.</p>

<h3>Only Removing Post Funk</h3>

<p>For the PAWS site, I use use inline <code class="language-markup">span</code> elements to apply classes on other pages (things like <code class="language-css">.text-tall</code> or <code class="language-css">.text-small</code>). The code above would remove those tags on pages, too.</p>

<p>Here&rsquo;s the code I use instead to only remove funk from blog posts:</p>

<pre><code class="language-php">/* ======================================================================
 * Disable-Inline-Styles.php
 * Removes inline styles and other coding junk added by the WYSIWYG editor.
 * Script by Chris Ferdinandi - https://gomakethings.com
 * ====================================================================== */

add_filter( 'the_content', 'clean_post_content' );
function clean_post_content($content) {

    // For individual posts and the index page
    if ( is_single() || is_home() ) {

        // Remove inline styling
        $content = preg_replace('/(&lt;[^&gt;]+) style=".*?"/i', '$1', $content);

        // Remove font tag
        $content = preg_replace('/&lt;font[^&gt;]+&gt;/', '', $content);

        // Remove empty tags
        $post_cleaners = array('&lt;p&gt;&lt;/p&gt;' =&gt; '', '&lt;p&gt; &lt;/p&gt;' =&gt; '', '&lt;p&gt;&amp;nbsp;&lt;/p&gt;' =&gt; '', '&lt;span&gt;&lt;/span&gt;' =&gt; '', '&lt;span&gt; &lt;/span&gt;' =&gt; '', '&lt;span&gt;&amp;nbsp;&lt;/span&gt;' =&gt; '', '&lt;span&gt;' =&gt; '', '&lt;/span&gt;' =&gt; '', '&lt;font&gt;' =&gt; '', '&lt;/font&gt;' =&gt; '');
        $content = strtr($content, $post_cleaners);

    }

    return $content;
}</code></pre>

<h2>Auto-Linking Image Funk</h2>

<p>By default, WordPress wraps images added with the editor in a link to the image source. If someone accidentally clicks on the image, it can be a jarring user experience.</p>

<p>You can disable this pretty easily in the editor itself, but people using the visual editor don&rsquo;t always know to do so. You can teach them how, but having to do that for everyone who uses the site can be a bit annoying.</p>

<p>Add this snippet to your <code>functions.php</code> file to change the default. It doesn&rsquo;t disable linking entirely - users can still add links manually later if they want to.</p>

<pre><code class="language-php">/* ======================================================================
 * Image-URL-Default.php
 * Overrides default image-URL behavior
 * http://wordpress.org/support/topic/insert-image-default-to-no-link
 * ====================================================================== */

update_option('image_default_link_type','none');</code></pre>

<p>Funk fixed!</p>

<h4>Bonus Funk Fixes</h4>

<ol>
<li><a href="https://gomakethings.com/remove-junk-from-the-wordpress-header/">Remove WordPress header junk</a></li>
<li><a href="https://gomakethings.com/how-to-remove-trackbacks-from-your-wordpress-comments/">Remove trackbacks from WordPress comments</a></li>
</ol>

</article>

	<br>
<aside>
	<p><mark>🚀 <em><strong>Make 2018 the year you master JavaScript!</strong> My <a href="https://gomakethings.com/guides/">pocket guides</a> and <a href="https://gomakethings.com/courses/">mini courses</a> are short, focused, and made for beginners. You can do this!</em></mark></p>

	<p><em>Have any questions or comments about this post? Email me at <a href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;">&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;</a> or contact me on Twitter at <a href="http://twitter.com/ChrisFerdinandi">@ChrisFerdinandi</a>.</em></p>

	<form action="https://gomakethings.us1.list-manage.com/subscribe/post?u=f2d244c0df42a0431bd08ddea&amp;id=aeaa9dd034" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
	<div class="row">
		<div class="grid-two-thirds">
			<div class="tarpit">
				<label for="name">Don't fill this field in</label>
				<input type="text" name="b_f2d244c0df42a0431bd08ddea_aeaa9dd034" id="name" value="">
			</div>
			<div>
				<label class="screen-reader" for="mce-EMAIL">Email Address</label>
				<input type="email" name="EMAIL" id="mce-EMAIL" title="The domain portion of the email address is invalid (the part after the @)." pattern="^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$" placeholder="Your email address..." required>
			</div>
			<input type="hidden" value="16" name="group[6981][16]" id="mce-group[6981]-6981-0">
		</div>
		<div class="grid-third">
			<button class="btn btn-block" type="submit">Get Daily Developer Tips</button>
		</div>
	</div>
	<div class="mc-status"></div>
</form>
</aside>

			</div>
		</main>

		<footer class="container container-large">
			<hr class="margin-bottom">
			<nav class="tabindex nav-secondary" id="nav-secondary" tabindex="-1">
	<ul class="list-inline list-inline-responsive">
		<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
	</ul>
</nav>
			<p class="text-small">Made with ❤️ in Massachussets. Unless otherwise noted, all code is free to use under the <a href="/mit">MIT License</a>.</p>
		</footer>

		<script src="https://gomakethings.com/js/loadJS.min.1.1.0.js"></script>
		<script>
			if ('querySelector' in document && 'addEventListener' in window) {
				loadJS('https:\/\/gomakethings.com\/js\/main.min.1.1.0.js');
			}
		</script>
	</body>
</html>