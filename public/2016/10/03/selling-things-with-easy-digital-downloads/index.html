<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Selling things with Easy Digital Downloads | Go Make Things</title>
		

		
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
		
		<link rel="shortcut icon" href="https://gomakethings.com/img/favicon.ico">
		<link rel="icon" sizes="16x16 32x32" href="https://gomakethings.com/img/favicon.ico">

		
		
		<link rel="alternate" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">
		<link rel="feed" type="application/rss+xml" title="Go Make Things RSS Feed" href="http://feeds.feedburner.com/GoMakeThings">

		
		<link rel="stylesheet" href="https://gomakethings.com/css/main.min.1.1.0.css">

		
		<script src="https://gomakethings.com/js/detects.min.1.1.0.js"></script>
		<script>
			;(function () {
				var css = 'https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i';
				if (getCookie('fontsLoaded')) {
					loadCSS(css);
					document.documentElement.className += 'fonts-loaded';
				} else {
					loadCSS(css);
					var font = new FontFaceObserver('PT Serif');
					font.load().then(function () {
						var expires = new Date(+new Date() + (7 * 24 * 60 * 60 * 1000)).toUTCString();
						document.cookie = 'fontsLoaded=true; expires=' + expires;
						document.documentElement.className += ' fonts-loaded';
					});
				}
			})();
		</script>
	</head>

	<body>

		<div class="container container-large">

	
	<a class="screen-reader screen-reader-focusable" href="#main">Skip to main content</a>

	
	<a class="screen-reader screen-reader-focusable" href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;?subject=Go%20Make%20Things:%20Accessibility%20Feedback">Accessibility Feedback</a>

</div>

		<header class="container container-large margin-bottom-large">
	<nav class="nav-wrap">
		<a class="logo" href="https://gomakethings.com">
			<svg xmlns="http://www.w3.org/2000/svg" style="height:.8em;width:.8em" viewBox="0 0 16 16"><title></title><path fill="currentColor" d="M14 9v2.066c-1.258 1.285-3.016 2.526-5 2.852V8.001h3v-1L9 5.83A3.001 3.001 0 0 0 8 .001 3 3 0 0 0 7 5.83L4 7.001v1h3v5.917c-1.984-.326-3.742-1.567-5-2.852V9H0v1c0 2 4 6 8 6s8-4 8-6V9h-2zM9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
			Go Make Things
		</a>
		<div class="nav-menu" id="nav-menu">
			<ul class="nav">
				<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
			</ul>
		</div>
	</nav>
</header>

		<main id="main" tabindex="-1">

			<div class="container">

	<article>

	
	<h1><span class="title">Selling things with Easy Digital Downloads</span></h1>
	

	

<p>I use <a href="https://easydigitaldownloads.com/">Easy Digital Downloads</a> to sell <a href="/books/">my books and other products</a>.</p>

<p>I&rsquo;ve made some customizations and added some extensions to the out-of-the-box setup. Today, I wanted to share with you what I&rsquo;ve done.</p>

<h2 id="payment-gateways">Payment gateways</h2>

<p>EDD supports PayPal Standard by default. It&rsquo;s kind of terrible.</p>

<p>I added the free <a href="https://wordpress.org/plugins/pal-for-edd/">PayPal for Easy Digital Downloads</a> plugin, which adds PayPal Express Checkout and other options.</p>

<p>I also purchased the <a href="https://easydigitaldownloads.com/downloads/stripe-gateway/">Stripe Payment Gateway extension</a>, so that people can pay via credit card through <a href="https://stripe.com">Stripe</a>.</p>

<h2 id="updates-by-email">Updates by email</h2>

<p>Since I planned on giving people free updates, I purchased the <a href="https://easydigitaldownloads.com/downloads/edd-product-updates/">Product Updates extension</a>. This lets you send email updates to people who have purchased a product with links to download the updated files.</p>

<p>I would strongly recommend using something like <a href="https://wordpress.org/plugins/postman-smtp/">Postman SMTP</a> with this, otherwise emails will get lost in the PHP void.</p>

<h2 id="mailchimp-integration">MailChimp Integration</h2>

<p>EDD sells a <a href="https://easydigitaldownloads.com/downloads/mail-chimp/">MailChimp extension</a> that lets you add purchasers to a list in MailChimp.</p>

<p>I&rsquo;m both too cheap to buy it, and wanted the ability to segment purchasers within a list, which the extension doesn&rsquo;t not allow you to do. So, I wrote my own.</p>

<p>I already have a custom <a href="https://github.com/cferdinandi/gmt-mailchimp">MailChimp plugin</a> I use to embed MailChimp forms on my site. <a href="https://github.com/cferdinandi/gmt-mailchimp-for-edd">MailChimp for EDD</a> extends it, giving you the ability to add people who buy a product or use a discount code to a list, and segment them into groups within that list.</p>

<h2 id="a-better-empty-cart">A better empty cart</h2>

<p>The default empty cart message is a bit lame. The free <a href="https://wordpress.org/plugins/easy-digital-downloads-empty-cart/">Easy Digital Downloads - Empty Cart</a> plugin lets you customize it.</p>

<h2 id="removing-the-name-fields">Removing the name fields</h2>

<p>I don&rsquo;t need someone&rsquo;s name when they buy one of my books. I only need their email address, and wanted to keep the checkout process as frictionless as possible.</p>

<p>I used the following code in my <code>functions.php</code> file to remove the name fields:</p>

<pre><code class="language-lang-php">/**
 * Unset first and last name as required fields in checkout
 * @param  Array $required_fields Required fields
 */
function keel_edd_purchase_form_required_fields( $required_fields ) {
	unset( $required_fields['edd_first'] );
	unset( $required_fields['edd_last'] );
	return $required_fields;
}
add_filter( 'edd_purchase_form_required_fields', 'keel_edd_purchase_form_required_fields' );

/**
 * Remove default name fields from checkout
 */
function keel_edd_remove_names() {
  remove_action( 'edd_purchase_form_after_user_info', 'edd_user_info_fields' );
}
add_action( 'init', 'keel_edd_remove_names' );

/**
 * Override the checkout fields markup without the name fields
 */
function keel_edd_user_info_fields() {
	if( is_user_logged_in() ) :
		$user_data = get_userdata( get_current_user_id() );
	endif;
	?&gt;
	&lt;fieldset id=&quot;edd_checkout_user_info&quot;&gt;
		&lt;?php do_action( 'edd_purchase_form_before_email' ); ?&gt;
		&lt;p id=&quot;edd-email-wrap&quot;&gt;
			&lt;label class=&quot;edd-label&quot; for=&quot;edd-email&quot;&gt;&lt;strong&gt;&lt;?php _e('Email Address', 'edd'); ?&gt;&lt;/strong&gt;&lt;/label&gt;
			&lt;input class=&quot;edd-input required&quot; type=&quot;email&quot; name=&quot;edd_email&quot; placeholder=&quot;&lt;?php _e('Email address', 'edd'); ?&gt;&quot; id=&quot;edd-email&quot; value=&quot;&lt;?php echo is_user_logged_in() ? $user_data-&gt;user_email : ''; ?&gt;&quot;/&gt;
		&lt;/p&gt;
		&lt;?php do_action( 'edd_purchase_form_after_email' ); ?&gt;
		&lt;?php do_action( 'edd_purchase_form_user_info' ); ?&gt;
	&lt;/fieldset&gt;
	&lt;?php
}
add_action( 'edd_purchase_form_after_user_info', 'keel_edd_user_info_fields' );
</code></pre>

<h2 id="only-allow-a-single-item-on-checkout">Only allow a single item on checkout</h2>

<p>Because I&rsquo;m not running a proper store, I don&rsquo;t want to have a &ldquo;View Cart&rdquo; link in my navigation. I want someone to click on the &ldquo;Buy Now&rdquo; button and go right to the checkout. Choosing another item removes the first one.</p>

<p>(Admittedly, this made more sense when I sold just one book with three different packages.)</p>

<p>Here&rsquo;s the PHP I added to my <code>functions.php</code> file to make that happen:</p>

<pre><code class="language-lang-php">/**
 * Only allow a single item at checkout
 */
function keel_edd_force_single_item_cart() {
	edd_empty_cart();
	return edd_get_cart_contents();
}
add_filter( 'edd_add_to_cart', 'keel_edd_force_single_item_cart', 1, 1 );
</code></pre>

<h2 id="display-javascript-required-message-on-checkout-if-js-is-disabled">Display &ldquo;JavaScript Required&rdquo; message on checkout if JS is disabled</h2>

<p>Both PayPal and Stripe require JavaScript to work. To make this more obvious, I wanted to disable the checkout button and add an error message if it&rsquo;s disabled.</p>

<p>First, I added this PHP to my <code>functions.php</code> file. It creates the deactivated button and error message:</p>

<pre><code class="language-lang-php">/**
 * Disable purchase button if no JS
 */
function keel_edd_no_js_disable_purchase() {
	$label = edd_get_option( 'checkout_label', '' );

	if ( edd_get_cart_total() ) {
		$complete_purchase = ! empty( $label ) ? $label : __( 'Purchase', 'easy-digital-downloads' );
	} else {
		$complete_purchase = ! empty( $label ) ? $label : __( 'Free Download', 'easy-digital-downloads' );
	}

	echo
		'&lt;div id=&quot;keel-edd-no-js-purchase-message&quot;&gt;' .
			'&lt;em&gt;' . __( 'Please enabled JavaScript to complete your purchase.', 'keel' ) . '&lt;/em&gt;&lt;br&gt;' .
			'&lt;button class=&quot;btn btn-large disabled&quot; disabled=&quot;disabled&quot;&gt;' . $complete_purchase . '&lt;/button&gt;' .
		'&lt;/div&gt;';
}
add_action( 'edd_purchase_form_after_submit', 'keel_edd_no_js_disable_purchase' );
</code></pre>

<p>Then, I added this JavaScript to my site, which adds a special class to the site if JavaScript is enabled:</p>

<pre><code class="language-lang-javascript">;(function (window, document, undefined) {

	'use strict';

	// JavaScript enabled
	document.documentElement.className += ' js-edd';

})(window, document);
</code></pre>

<p>Finally, I included this CSS on my site, which hooks into that class to hide the error message when JavaScript is available:</p>

<pre><code class="language-lang-css">/* Message above disabled &quot;Complete Purchase&quot; button when JS isn't enabled */
.js-edd #keel-edd-no-js-purchase-message {
	display: none;
	visibility: hidden;
}
</code></pre>

<h2 id="only-load-paypal-scripts-and-styles-at-checkout">Only load PayPal scripts and styles at checkout</h2>

<p>The free PayPal payment gateway plugin loads some extra CSS and JavaScript throughout the whole site. I only want those files to load on checkout for better performance.</p>

<p>This bit of PHP added to my <code>functions.php</code> file does the trick:</p>

<pre><code class="language-lang-php">/**
 * Only load PayPal JS and CSS on checkout page
 */
function keel_edd_only_load_files_on_checkout() {
	if ( is_page( 'checkout' ) ) return;
	wp_dequeue_style( 'pal-for-edd' );
	wp_dequeue_script( 'pal-for-edd' );
	wp_dequeue_script( 'pal-for-eddpaypal_for_edd_blockUI' );
}
add_action( 'wp_enqueue_scripts', 'keel_edd_only_load_files_on_checkout' );
</code></pre>

<h2 id="hide-unneeded-stripe-fields">Hide unneeded Stripe fields</h2>

<p>When paying with credit card, the Stripe payment gateway adds address fields. I&rsquo;m not shipping anything, so the only one I need is a zip code and country, which are used to verify the credit card.</p>

<p>I added this bit of PHP to my <code>functions.php</code> file to hide the others:</p>

<pre><code class="language-lang-php">/**
 * Removes the credit card billing address fields
 */
function keel_edd_remove_default_fields() {
	remove_action( 'edd_after_cc_fields', 'edd_default_cc_address_fields' );
}
add_action( 'init', 'keel_edd_remove_default_fields' );



/**
 * Adds in only the required credit card address fields
 * @link https://easydigitaldownloads.com/forums/topic/can-i-remove-billing-details-from-checkout-page/#post-445013
 */
function keel_edd_default_cc_address_fields() {
	ob_start(); ?&gt;
	&lt;fieldset id=&quot;edd_cc_address&quot; class=&quot;cc-address&quot;&gt;
		&lt;span&gt;&lt;legend&gt;&lt;?php _e( 'Billing Details', 'edd' ); ?&gt;&lt;/legend&gt;&lt;/span&gt;
		&lt;?php do_action( 'edd_cc_billing_top' ); ?&gt;
		&lt;p id=&quot;edd-card-zip-wrap&quot;&gt;
			&lt;label for=&quot;card_zip&quot; class=&quot;edd-label&quot;&gt;
				&lt;?php _e( 'Billing Zip / Postal Code', 'edd' ); ?&gt;
				&lt;?php if( edd_field_is_required( 'card_zip' ) ) { ?&gt;
					&lt;span class=&quot;edd-required-indicator&quot;&gt;*&lt;/span&gt;
				&lt;?php } ?&gt;
			&lt;/label&gt;
			&lt;span class=&quot;edd-description&quot;&gt;&lt;?php _e( 'The zip or postal code for your billing address.', 'edd' ); ?&gt;&lt;/span&gt;
			&lt;input type=&quot;text&quot; size=&quot;4&quot; name=&quot;card_zip&quot; class=&quot;card-zip edd-input required&quot; placeholder=&quot;&lt;?php _e( 'Zip / Postal code', 'edd' ); ?&gt;&quot; value=&quot;&lt;?php echo $zip; ?&gt;&quot;/&gt;
		&lt;/p&gt;

		&lt;p id=&quot;edd-card-country-wrap&quot;&gt;
			&lt;label for=&quot;billing_country&quot; class=&quot;edd-label&quot;&gt;
				&lt;?php _e( 'Billing Country', 'edd' ); ?&gt;
				&lt;?php if( edd_field_is_required( 'billing_country' ) ) { ?&gt;
					&lt;span class=&quot;edd-required-indicator&quot;&gt;*&lt;/span&gt;
				&lt;?php } ?&gt;
			&lt;/label&gt;
			&lt;span class=&quot;edd-description&quot;&gt;&lt;?php _e( 'The country for your billing address.', 'edd' ); ?&gt;&lt;/span&gt;
			&lt;select name=&quot;billing_country&quot; id=&quot;billing_country&quot; class=&quot;billing_country edd-select&lt;?php if( edd_field_is_required( 'billing_country' ) ) { echo ' required'; } ?&gt;&quot;&gt;
				&lt;?php
				$selected_country = edd_get_shop_country();
				if( $logged_in &amp;&amp; ! empty( $user_address['country'] ) &amp;&amp; '*' !== $user_address['country'] ) {
					$selected_country = $user_address['country'];
				}
				$countries = edd_get_country_list();
				foreach( $countries as $country_code =&gt; $country ) {
				  echo '&lt;option value=&quot;' . esc_attr( $country_code ) . '&quot;' . selected( $country_code, $selected_country, false ) . '&gt;' . $country . '&lt;/option&gt;';
				}
				?&gt;
			&lt;/select&gt;
		&lt;/p&gt;

		&lt;?php do_action( 'edd_cc_billing_bottom' ); ?&gt;
	&lt;/fieldset&gt;
	&lt;?php
	echo ob_get_clean();
}
add_action( 'edd_after_cc_fields', 'keel_edd_default_cc_address_fields' );
</code></pre>

<h2 id="additional-style-updates">Additional style updates</h2>

<p>I added a handful of other little style changes, mostly to bring the default EDD layout inline with the rest of my site.</p>

<p>Since they&rsquo;re custom to my theme, I won&rsquo;t share them here, but if EDD provides plenty of classes and IDs you can hook into for styling.</p>


</article>

	<br>
<aside>
	<p><mark>🚀 <em><strong>Make 2018 the year you master JavaScript!</strong> My <a href="https://gomakethings.com/guides/">pocket guides</a> and <a href="https://gomakethings.com/courses/">mini courses</a> are short, focused, and made for beginners. You can do this!</em></mark></p>

	<p><em>Have any questions or comments about this post? Email me at <a href="mailto:&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;">&#099;&#104;&#114;&#105;&#115;&#064;&#103;&#111;&#109;&#097;&#107;&#101;&#116;&#104;&#105;&#110;&#103;&#115;&#046;&#099;&#111;&#109;</a> or contact me on Twitter at <a href="http://twitter.com/ChrisFerdinandi">@ChrisFerdinandi</a>.</em></p>

	<form action="https://gomakethings.us1.list-manage.com/subscribe/post?u=f2d244c0df42a0431bd08ddea&amp;id=aeaa9dd034" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
	<div class="row">
		<div class="grid-two-thirds">
			<div class="tarpit">
				<label for="name">Don't fill this field in</label>
				<input type="text" name="b_f2d244c0df42a0431bd08ddea_aeaa9dd034" id="name" value="">
			</div>
			<div>
				<label class="screen-reader" for="mce-EMAIL">Email Address</label>
				<input type="email" name="EMAIL" id="mce-EMAIL" title="The domain portion of the email address is invalid (the part after the @)." pattern="^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$" placeholder="Your email address..." required>
			</div>
			<input type="hidden" value="16" name="group[6981][16]" id="mce-group[6981]-6981-0">
		</div>
		<div class="grid-third">
			<button class="btn btn-block" type="submit">Get Daily Developer Tips</button>
		</div>
	</div>
	<div class="mc-status"></div>
</form>
</aside>

			</div>
		</main>

		<footer class="container container-large">
			<hr class="margin-bottom">
			<nav class="tabindex nav-secondary" id="nav-secondary" tabindex="-1">
	<ul class="list-inline list-inline-responsive">
		<li><a href="https://gomakethings.com/about">About</a></li><li><a href="https://gomakethings.com/guides">Guides</a></li><li><a href="https://gomakethings.com/courses">Courses</a></li><li><a href="https://gomakethings.com/resources">Resources</a></li><li><a href="https://gomakethings.com/articles">Daily Tips</a></li>
	</ul>
</nav>
			<p class="text-small">Made with ❤️ in Massachussets. Unless otherwise noted, all code is free to use under the <a href="/mit">MIT License</a>.</p>
		</footer>

		<script src="https://gomakethings.com/js/loadJS.min.1.1.0.js"></script>
		<script>
			if ('querySelector' in document && 'addEventListener' in window) {
				loadJS('https:\/\/gomakethings.com\/js\/main.min.1.1.0.js');
			}
		</script>
	</body>
</html>